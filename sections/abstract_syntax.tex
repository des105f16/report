% !TEX root = ../master.tex
\section{Abstract syntax}

\begin{align*}
  P       & \in \iProg \text{ -- Programs}\\
  D_V     & \in \iDecv \text{ -- Variable declarations}\\
  x       & \in \iVar \text{ -- Variables}\\
  D_F     & \in \iDecf \text{ -- Function declarations}\\
  f       & \in \iFun \text{ -- Functions}\\
  p       & \in \iPrin \text{ -- Principals}\\
  S       & \in \iStm \text{ -- Statements}\\
  e       & \in \iExp \text{ -- Expressions}\\
  l       & \in \mathbb{L} \cup \epsilon \text{ -- Labels}\\
  op_b    & \in \{ \tk + ,  \tk - ,  \tk * ,  \tk / ,  \tk \% ,  \tk{||} ,  \tk{\&\&} ,  \tk < ,  \tk > ,  \tk{==} ,  \tk{<=} ,  \tk{>=} \} \\
  op_u    & \in \{ \tk ! ,  \tk - \}
\end{align*}
\begin{align*}
  P         & ::= D_V \gp D_F \gp P_1 \; P_2 \\
  D_V       & ::= T \, l \, x \tk = e \gp T \, l x \\
  D_F       & ::= T_f \, l_f \, f \tk ( T_1 \, l_1 \, x_1 \tk , T_2 \, l_2 \, x_2 \tk , \dots \tk , T_n \, l_n \, x_n \tk ) S \\
  S         & ::= e \gp S_1 \; S_2 \gp \varepsilon \\
            & \gp D_V \\
            & \gp \tk{while} \tk ( e \tk ) S \gp \tk{if} \tk ( e \tk ) S \gp \tk{if} \tk ( e \tk ) S_1 \tk{else} S_2 \\
            & \gp x \tk = e \\
            & \gp \tk{return} e \gp \tk{return} \\
            & \gp \tk{this} \tk{-{}->?} p_1 \tk , p_2 \tk , \dots \tk , p_n \; S \gp \tk{caller} \tk{-{}->?} p_1 \tk , p_2 \tk , \dots \tk , p_n \; S \\
  e         & ::= x \gp c \gp e_1 \; op_b \; e_2 \gp op_u \; e \gp \tk ( e \tk ) \\
            & \gp \tk{<|} e \tk , l \tk{|>} \gp \tk{<|} e \tk{|>} \\
            & \gp f \tk{<{}<{}<} p_1 \tk , p_2 \tk , \dots \tk , p_k \tk{>{}>{}>} \tk ( e_1 \tk , e_2 \tk , \dots \tk , e_n \tk )
\end{align*}
