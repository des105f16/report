% !TEX root = ../master.tex
\section{Abstract syntax}

\begin{align*}
  P       & \in \iProg \text{ -- Programs}\\
  D_V     & \in \iDecv \text{ -- Variable declarations}\\
  x       & \in \iVar \text{ -- Variables}\\
  D_F     & \in \iDecf \text{ -- Function declarations}\\
  f       & \in \iFun \text{ -- Functions}\\
  D_{Par} & \in \iDecpar \text{ -- Parameter declarations}\\
  p       & \in \iPrin \text{ -- Principals}\\
  S       & \in \iStm \text{ -- Statements}\\
  S_L     & \in \iStml \text{ -- Label statements}\\
  e       & \in \iExp \text{ -- Expressions}\\
  e_L     & \in \iExpl \text{ -- Label expressions}\\
  l       & \in \mathbb{L} \cup \epsilon \text{ -- Labels}\\
\end{align*}
\begin{align*}
  P         & ::= D_V \gp D_F \gp P \; P \\
  D_V       & ::= T \, l \, x \, [\tk = e] \\
  D_F       & ::= T \, l \, f \tk ( D_{Par} \tk ) S \\
  D_{Par}   & ::= T \, l \, x \gp D_{Par_1} \tk , D_{Par_2} \gp \epsilon \\
  S         & ::= e \gp S_L \gp S_1 \tk ; S_2 \gp other \; statements \\
  S_L       & ::= \tk{while} \tk ( e \tk ) S \gp \tk{if} \tk ( e \tk ) S \gp \tk{if} \tk ( e \tk ) S_1 \tk{else} S_2 \\
            & \gp x \tk = e \\
            & \gp \tk{return} [e] \\
            & \gp \tk{this} \tk{-{}->?} p_l \; S \gp \tk{caller} \tk{-{}->?} p_l \; S \\
  e         & ::= e_L \gp x \gp c \gp e_1 \; op_b \; e_2 \gp op_u \; e \gp \tk ( e \tk ) \\
  e_L       & ::= \tk{<|} e \tk , l \tk{|>} \\
            & \gp f \; [\tk{<{}<{}<} p_l \tk{>{}>{}>}] \tk ( e_1 \tk , e_2 \tk , \dots \tk , e_n \tk ) \\
  p         & ::= p \gp {p_l}_1 \tk , {p_l}_2 \\
  op_b      & ::= \tk + \gp \tk - \gp \tk * \gp \tk / \gp \tk \% \gp \tk{||} \gp \tk{\&\&} \gp \tk < \gp \tk > \gp \tk{==} \gp \tk{<=} \gp \tk{>=} \\
  op_u      & ::= \tk ! \gp \tk - \\
  c         & ::= constants
\end{align*}
