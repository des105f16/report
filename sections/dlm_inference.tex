% !TEX root = ../master.tex

\section{Inference Algorithm}

\subsection{Semantics for determining labels}
The set of label states is called $\iLbl$ and is defined by:
\[
  \iLbl = \iVar \cup \iFun \cup \iStmc \cup \iExpd \rightharpoonup \mathbb{L}
\]
Where $\mathbb{L}$ is the set of labels.
There are three types of labels:
\begin{enumerate}
  \item Policy labels -- like those described earlier
  \item Variable labels -- denoted $\underline{x}$
  \item Constant labels -- denoted $\overline{p}$
\end{enumerate}

\subsubsection{Variable declarations}
$(\Gamma_{DV}, \rightarrow_{DV}, T_{DV})$, with
\begin{align*}
  \Gamma_{DV} & = (\iDecv \times \iLbl) \cup \iLbl \\
  T_{DV} & = \iLbl \\
\end{align*}
For $\rightarrow_{DV}$ see \cref{dlmi:var_decl}.

\begin{table}
  \trule{VAR-DECL-EXP}
        {\langle T \, l \, x, lbl \rangle \rightarrow_{DV} (lbl')}
        {\langle D_V, lbl[x \mapsto l] \rangle \rightarrow_{DV} (lbl')}
        {\text{where } l \in \mathbb{L}}
  \trule{VAR-DECL-IMP}
        {\langle T \, l \, x, lbl \rangle \rightarrow_{DV} (lbl')}
        {\langle D_V, lbl[x \mapsto \underline{x}] \rangle \rightarrow_{DV} (lbl')}
        {\text{where } l = \epsilon}
\caption{Label semantics for variable declarations}
\label{dlmi:var_decl}
\end{table}

\subsubsection{Function declarations}
$(\Gamma_{DF}, \rightarrow_{DF}, T_{DF})$, with
\begin{align*}
  \Gamma_{DF} & = (\iDecf \times \iLbl) \cup \iLbl \\
  T_{DF} & = \iLbl
\end{align*}
For $\rightarrow_{DF}$ see \cref{dlmi:fun_decl}.
The function environment $\iDecf$ is given as:
\[ \iDecf = \iFun \rightharpoonup (p_1, p_2, \dots, p_n) \]
where $p_i \in \iVar \land 1 \leq i \leq n$.

\begin{table}
\trule{NAME}{bottom}{top}{\text{where stuff}}
\caption{Label semantics for function declarations}
\label{dlmi:fun_decl}
\end{table}

\input{algorithms/inference.tex}
