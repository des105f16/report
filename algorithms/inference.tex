% !TEX root = ../master.tex
{
\let\oldnl\nl% Store \nl in \oldnl
\newcommand{\nonl}{\renewcommand{\nl}{\let\nl\oldnl}}% Remove line number for one line

\begin{algorithm}[h]
\SetAlgoNoEnd
\DontPrintSemicolon
\SetKw{Let}{let}
\SetKw{Error}{ERROR}
\SetKw{False}{false}
\SetKw{True}{true}
\SetKwData{Checked}{checked}
\KwData{A set $Q$ of constraints $"L_1 \sqsubseteq L_2"$}

\ForEach {$"L_1 \sqsubseteq L_2" \in Q$}
{
  \Let $Q' = Q \setminus "L_1 \sqsubseteq L_2"$\;
  $Q := Q' \cup unjoin("L_1 \sqsubseteq L_2")$\;
}
\ForEach {$"L_1 \sqsubseteq L_2" \in Q$}
{
  \If {$L_1$ is a variable label}
  {
    $\lceil L_1 \rceil := \top$\;
  }
}
\Checked := \False\;
\While {$\neg$ \Checked}
{
  \Checked := \True\;
  \ForEach {$"L_1 \sqsubseteq L_2" \in Q$}
  {
    \If {$L_1 \not\sqsubseteq L_2$}
    {
      \eIf {$L_1$ is a variable label}
      {
        $\ceil{L_1} := \ceil{L_1} \sqcap \ceil{L_2}$\;
        \Checked := \False\;
      }
      {
        \Error\;
      }
    }
  }
}
\caption{Label inference from constraint set}\label{dlm:inf:algorithm}
\end{algorithm}
}
